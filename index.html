<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Optimization -->
    <title>Prehouses | Casas Prefabricadas y Modulares en España - Precios y Modelos 2025</title>
    <meta name="description"
        content="Encuentra tu casa prefabricada ideal en España. Catálogo completo de casas modulares, de hormigón, madera y acero. Comparativa de precios, modelos y fabricantes líderes.">
    <meta name="keywords"
        content="casas prefabricadas, casas modulares, precios casas prefabricadas, casas prefabricadas españa, casas hormigon, casas madera, mobile homes">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon_prehouses_1764872622091.png">

    <link rel="stylesheet" href="styles.css">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo luxury-font"
                style="font-size: 1.5rem; display: flex; align-items: center; gap: 8px;">
                <span style="color: var(--primary);">PRE</span>HOUSES
            </a>
            <ul class="nav-links">
                <li><a href="index.html" class="active">Inicio</a></li>
                <li><a href="catalogo.html">Catálogo</a></li>
                <li><a href="asesor.html" class="ia-accent"><i class="fa-solid fa-sparkles"></i> Asesor IA</a></li>
                <li><a href="acceso.html" class="btn-login">Acceso</a></li>
                <li><a href="catalogo.html" class="btn btn-primary"
                        style="padding: 12px 24px; font-size: 0.9rem;">Explorar</a></li>
            </ul>
            <div class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu" id="mobileMenu">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="catalogo.html">Catálogo</a></li>
            <li><a href="asesor.html" class="ia-accent">Asesor IA</a></li>
            <li><a href="acceso.html">Mi Cuenta</a></li>
        </ul>
    </div>

    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const toggle = document.querySelector('.mobile-menu-toggle');
            menu.classList.toggle('active');
            toggle.classList.toggle('active');
        }
    </script>

    <!-- Full Screen Hero -->
    <header class="hero-premium">
        <div class="hero-bg-overlay"></div>
        <div class="container">
            <div class="hero-content-v2">
                <span class="hero-eyebrow">EL FUTURO DE LA VIVIENDA</span>
                <h1 id="dynHeroTitle" class="hero-title-v2">Encuentra tu<span>Casa Prefabricada</span></h1>
                <p id="dynHeroDesc" class="hero-description-v2">Diseño arquitectónico, eficiencia energética y libertad
                    absoluta. La mayor selección de viviendas premium en España.</p>

                <div class="hero-actions">
                    <a href="catalogo.html" class="btn btn-primary">
                        Ver Colección 2025 <i class="fa-solid fa-arrow-right"></i>
                    </a>
                    <a href="asesor-ia.html" class="btn-link">
                        Asesor Personal IA <i class="fa-solid fa-chevron-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="hero-scroll-indicator">
            <div class="mouse"></div>
            <span>Scroll para explorar</span>
        </div>
    </header>

    <!-- Minimal Trust Bar -->
    <section class="premium-trust">
        <div class="container flex-center" style="gap: 80px; flex-wrap: wrap;">
            <div class="trust-item-v2">
                <span class="trust-number" id="dynTrust1">+100</span>
                <span class="trust-label">Modelos</span>
            </div>
            <div class="trust-item-v2">
                <span class="trust-number" id="dynTrust2">50+</span>
                <span class="trust-label">Fabricantes</span>
            </div>
            <div class="trust-item-v2">
                <span class="trust-number" id="dynTrust3">100%</span>
                <span class="trust-label">Verificados</span>
            </div>
        </div>
    </section>

    <!-- Premium Categories Grid -->
    <section class="section-padding">
        <div class="container">
            <span class="section-subtitle">Arquitectura Modular</span>
            <h2 class="section-title">Nuestras Categorías</h2>

            <div class="category-grid">
                <div class="category-card">
                    <div class="category-icon"><i class="fa-solid fa-cubes"></i></div>
                    <h3 class="category-title">Hormigón</h3>
                    <p>Casas prefabricadas sólidas y duraderas.</p>
                </div>
                <div class="category-card">
                    <div class="category-icon"><i class="fa-solid fa-tree"></i></div>
                    <h3 class="category-title">Madera</h3>
                    <p>Estilo rústico y sostenible.</p>
                </div>
                <div class="category-card">
                    <div class="category-icon"><i class="fa-solid fa-layer-group"></i></div>
                    <h3 class="category-title">Modulares</h3>
                    <p>Flexibilidad y rapidez de montaje.</p>
                </div>
                <div class="category-card">
                    <div class="category-icon"><i class="fa-solid fa-leaf"></i></div>
                    <h3 class="category-title">Ecológicas</h3>
                    <p>Eficiencia energética superior.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Dynamic Featured Section -->
    <section class="section-padding" style="background: white;">
        <div class="container">
            <span class="section-subtitle">Selección Exclusiva</span>
            <h2 class="section-title">Modelos Destacados</h2>
            <div id="featuredHousesGrid" class="house-grid">
                <!-- Se carga con JS -->
            </div>
            <div class="flex-center" style="margin-top: 60px;">
                <a href="catalogo.html" class="btn btn-secondary">Explorar Colección Completa</a>
            </div>
        </div>
    </section>

    <!-- Professional Disclaimer -->
    <section class="section-padding" style="background: var(--bg-soft); border-top: var(--border-soft);">
        <div class="container">
            <div style="max-width: 800px; margin: 0 auto; text-align: center;">
                <i class="fa-solid fa-shield-check"
                    style="font-size: 2.5rem; color: var(--primary); margin-bottom: 24px;"></i>
                <h3 class="luxury-font" style="font-size: 2rem; margin-bottom: 20px;">Transparencia y Confianza</h3>
                <p style="color: var(--text-muted); font-size: 1.1rem; line-height: 1.8;">
                    <strong>Prehouses</strong> es el portal marketplace líder en España. No vendemos casas directamente;
                    conectamos a personas con los fabricantes más prestigiosos. Nuestro compromiso es facilitar la
                    búsqueda de tu hogar ideal mediante tecnología y diseño.
                </p>
            </div>
        </div>
    </section>

    <!-- Luxury Footer -->
    <footer style="background: var(--bg-dark); color: white; padding: 100px 0 40px;">
        <div class="container">
            <div style="display: grid; grid-template-columns: 1.5fr 1fr 1fr 1fr; gap: 60px; margin-bottom: 80px;">
                <div>
                    <a href="index.html" class="logo luxury-font"
                        style="font-size: 1.5rem; color: white; display: block; margin-bottom: 24px;">
                        <span style="color: var(--accent);">PRE</span>HOUSES
                    </a>
                    <p style="color: rgba(255,255,255,0.5); font-size: 0.95rem; line-height: 1.8;">
                        Redefiniendo el concepto de hogar a través de la arquitectura modular y la sostenibilidad.
                    </p>
                </div>
                <div>
                    <h4
                        style="margin-bottom: 24px; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.2em; color: var(--accent);">
                        Explorar</h4>
                    <ul style="list-style: none; display: grid; gap: 12px;">
                        <li><a href="catalogo.html" style="color: rgba(255,255,255,0.7);">Catálogo</a></li>
                        <li><a href="asesor.html" style="color: rgba(255,255,255,0.7);">Asesor IA</a></li>
                        <li><a href="blog.html" style="color: rgba(255,255,255,0.7);">Blog</a></li>
                    </ul>
                </div>
                <div>
                    <h4
                        style="margin-bottom: 24px; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.2em; color: var(--accent);">
                        Legal</h4>
                    <ul style="list-style: none; display: grid; gap: 12px;">
                        <li><a href="privacidad.html" style="color: rgba(255,255,255,0.7);">Privacidad</a></li>
                        <li><a href="cookies.html" style="color: rgba(255,255,255,0.7);">Cookies</a></li>
                        <li><a href="aviso-legal.html" style="color: rgba(255,255,255,0.7);">Aviso Legal</a></li>
                    </ul>
                </div>
                <div>
                    <h4
                        style="margin-bottom: 24px; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.2em; color: var(--accent);">
                        Sedes</h4>
                    <p style="color: rgba(255,255,255,0.5); font-size: 0.9rem;">Madrid & Barcelona, España</p>
                    <p style="color: rgba(255,255,255,0.5); font-size: 0.9rem; margin-top: 12px;">info@prehouses.es</p>
                </div>
            </div>
            <div
                style="padding-top: 40px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; color: rgba(255,255,255,0.3); font-size: 0.85rem;">
                &copy; 2025 PREHOUSES. Excellence in Modular Architecture.
            </div>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>

    <script>
        // Cargar contenido dinámico de la página
        async function loadDynamicContent() {
            try {
                const doc = await db.collection('settings').doc('pageContent').get();
                if (doc.exists) {
                    const data = doc.data();
                    const titleEl = document.getElementById('dynHeroTitle');
                    const descEl = document.getElementById('dynHeroDesc');
                    const t1 = document.getElementById('dynTrust1');
                    const t2 = document.getElementById('dynTrust2');
                    const t3 = document.getElementById('dynTrust3');

                    if (titleEl && data.heroTitle1 && data.heroTitle2) {
                        titleEl.innerHTML = `${data.heroTitle1}<span>${data.heroTitle2}</span>`;
                    }
                    if (descEl && data.heroDesc) descEl.textContent = data.heroDesc;
                    if (t1 && data.trustVal1) t1.textContent = data.trustVal1;
                    if (t2 && data.trustVal2) t2.textContent = data.trustVal2;
                    if (t3 && data.trustVal3) t3.textContent = data.trustVal3;

                    // Fondo Hero Dinámico
                    if (data.heroBgUrl) {
                        const heroSec = document.querySelector('.hero-premium');
                        if (heroSec) {
                            heroSec.style.backgroundImage = `linear-gradient(rgba(2, 6, 23, 0.6), rgba(2, 6, 23, 0.8)), url('${data.heroBgUrl}')`;
                        }
                    }
                }
            } catch (error) {
                console.error("Error loading dynamic content:", error);
            }
        }

        // Cargar casas destacadas después de que Firebase se inicialice
        async function loadFeatured() {
            const container = document.getElementById('featuredHousesGrid');
            if (!container) return;

            try {
                const snapshot = await db.collection('houses').limit(3).get();

                if (snapshot.empty) {
                    container.innerHTML = `
                        <div style="grid-column: 1/-1; text-align: center; padding: 100px; background: var(--bg-soft); border-radius: 32px;">
                            <p style="color: var(--text-muted); font-weight: 500;">Nuestra nueva colección está en camino.</p>
                        </div>
                    `;
                    return;
                }

                let html = '';
                snapshot.forEach(doc => {
                    const house = doc.data();
                    const img = Array.isArray(house.images) && house.images.length > 0 ? house.images[0] : (house.image || 'https://images.unsplash.com/photo-1600585154340-be6199fbfd0b?auto=format&fit=crop&q=80&w=1000');
                    const priceDisplay = typeof house.price === 'number' && house.price > 0 ?
                        new Intl.NumberFormat('es-ES').format(house.price) + '€' :
                        (house.price || 'Consultar');
                    const location = house.location || 'Diseño de Vanguardia';

                    html += `
                        <article class="house-card">
                            <a href="detalle-casa.html?id=${doc.id}" class="house-image-wrapper">
                                <img src="${img}" alt="${house.title}" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1600585154340-be6199fbfd0b?auto=format&fit=crop&q=80&w=1000'">
                                <span class="house-badge-premium">DESTACADO</span>
                            </a>
                            <div class="house-info">
                                <div class="house-location">${location}</div>
                                <h3 class="house-title">${house.title}</h3>
                                <div class="house-price">${priceDisplay}</div>
                                <div class="house-specs">
                                    <div class="spec-item">
                                        <span class="spec-value">${house.area}m²</span>
                                        <span class="spec-label">Superficie</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-value">${house.rooms || house.bedrooms || 0}</span>
                                        <span class="spec-label">Dorm.</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-value">${house.bathrooms || 1}</span>
                                        <span class="spec-label">Baños</span>
                                    </div>
                                </div>
                            </div>
                        </article>
                    `;
                });

                container.innerHTML = html;

            } catch (error) {
                console.error('Error loading featured houses:', error);
                container.innerHTML = `<p style="grid-column: 1/-1; text-align: center; color: red;">Error: ${error.message}</p>`;
            }
        }

        // Scroll Effect & Initialization
        document.addEventListener('DOMContentLoaded', () => {
            const navbar = document.querySelector('.navbar');

            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });

            setTimeout(() => {
                loadDynamicContent();
                loadFeatured();
            }, 500);
        });
    </script>
    </script>

</body>

</html>