<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelo Nordic Eco - Prehouses</title>
    <meta name="description" content="Detalles del Modelo Nordic Eco. Casa prefabricada moderna y eficiente de 80m².">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo">
                <i class="fa-solid fa-house-chimney"></i> Prehouses
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="catalogo.html">Catálogo</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="asesor.html" style="color: var(--primary); font-weight: 600;"><i
                            class="fa-solid fa-wand-magic-sparkles"></i> Asesor IA</a></li>
                <li><a href="usuarios.html">Acceso Empresas</a></li>
                <li><a href="usuarios.html" class="btn btn-primary" style="padding: 10px 24px; color: white;">Acceso
                        Usuarios</a></li>
            </ul>
        </div>
    </nav>

    <!-- Product Detail -->
    <div class="container detail-container">
        <div class="detail-grid">

            <!-- Left Column: Gallery & Info -->
            <div class="detail-content">
                <div class="detail-gallery">
                    <div class="main-image">
                        <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=1200&q=80"
                            alt="Modelo Nordic Eco">
                    </div>
                    <div class="thumbnail-grid">
                        <div class="thumbnail active">
                            <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=300&q=80"
                                alt="Vista Exterior">
                        </div>
                        <div class="thumbnail">
                            <img src="https://images.unsplash.com/photo-1484154218962-a1c002085d2f?auto=format&fit=crop&w=300&q=80"
                                alt="Cocina">
                        </div>
                        <div class="thumbnail">
                            <img src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?auto=format&fit=crop&w=300&q=80"
                                alt="Salón">
                        </div>
                        <div class="thumbnail">
                            <img src="https://images.unsplash.com/photo-1502005229762-cf1b2da7c5d6?auto=format&fit=crop&w=300&q=80"
                                alt="Interiores">
                        </div>
                    </div>
                </div>

                <div class="detail-info" style="margin-top: 40px;">
                    <div class="detail-tags">
                        <span class="tag">Madera</span>
                        <span class="tag">Eco</span>
                        <span class="tag">Más Vendida</span>
                    </div>
                    <h1>Modelo Nordic Eco</h1>
                    <div class="detail-price">45.000€ <span
                            style="font-size: 1rem; color: var(--text-light); font-weight: 400;">(IVA no
                            incluido)</span></div>

                    <div class="features-box">
                        <h3 style="margin-bottom: 20px; color: var(--secondary);">Características Principales</h3>
                        <div class="features-grid">
                            <div class="feature-item"><i class="fa-solid fa-ruler-combined"></i> 80 m² construidos</div>
                            <div class="feature-item"><i class="fa-solid fa-bed"></i> 2 Habitaciones</div>
                            <div class="feature-item"><i class="fa-solid fa-bath"></i> 1 Baño completo</div>
                            <div class="feature-item"><i class="fa-solid fa-clock"></i> 2 Meses de construcción</div>
                            <div class="feature-item"><i class="fa-solid fa-certificate"></i> Certificación Energética
                                A+</div>
                            <div class="feature-item"><i class="fa-solid fa-truck-fast"></i> Transporte incluido (300km)
                            </div>
                        </div>
                    </div>

                    <div class="detail-description">
                        <h3 style="margin-bottom: 15px; color: var(--secondary);">Descripción del Modelo</h3>
                        <p>
                            El <strong>Modelo Nordic Eco</strong> es la elección perfecta para quienes buscan una
                            vivienda sostenible, moderna y funcional. Inspirada en el diseño escandinavo, esta casa
                            destaca por su luminosidad y el uso de materiales naturales.
                        </p>
                        <br>
                        <p>
                            Construida con estructura de madera laminada de alta calidad, ofrece un aislamiento térmico
                            excepcional, reduciendo el consumo energético al mínimo. Su distribución abierta maximiza el
                            espacio disponible, creando un ambiente acogedor y amplio.
                        </p>
                        <br>
                        <p>
                            <strong>Ideal para:</strong> Parejas, pequeñas familias o como segunda residencia en
                            entornos naturales.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Right Column: Contact Form -->
            <div class="detail-sidebar">
                <div class="contact-form-card">
                    <h3>Contactar Fabricante</h3>
                    <p style="margin-bottom: 20px; font-size: 0.9rem; color: var(--text-light);">
                        Solicita más información o un presupuesto personalizado directamente a la empresa constructora.
                    </p>
                    <form>
                        <div class="form-group">
                            <label>Nombre Completo</label>
                            <input type="text" id="leadName" placeholder="Tu nombre">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="leadEmail" placeholder="tu@email.com">
                        </div>
                        <div class="form-group">
                            <label>Teléfono</label>
                            <input type="tel" id="leadPhone" placeholder="+34 600 000 000">
                        </div>
                        <div class="form-group">
                            <label>Mensaje</label>
                            <textarea rows="4" id="leadMessage"
                                placeholder="Hola, estoy interesado en el Modelo Nordic Eco..."></textarea>
                        </div>
                        <button type="button" onclick="sendLead()" class="btn btn-primary" style="width: 100%;">Enviar
                            Solicitud</button>
                        <p style="margin-top: 15px; font-size: 0.8rem; text-align: center; color: var(--text-light);">
                            Al enviar aceptas nuestra política de privacidad.
                        </p>
                    </form>
                </div>
            </div>

        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>Prehouses</h4>
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        El portal líder de casas prefabricadas en España.
                    </p>
                </div>
                <div class="footer-col">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="aviso-legal.html">Aviso Legal</a></li>
                        <li><a href="privacidad.html">Política de Privacidad</a></li>
                        <li><a href="cookies.html">Cookies</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 Prehouses. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>

    <script>
        let currentUser = null;

        auth.onAuthStateChanged((user) => {
            currentUser = user;
            if (user) {
                // Pre-fill form if logged in
                document.getElementById('leadName').value = user.displayName || '';
                document.getElementById('leadEmail').value = user.email || '';
            }
        });

        async function sendLead() {
            const name = document.getElementById('leadName').value.trim();
            const email = document.getElementById('leadEmail').value.trim();
            const phone = document.getElementById('leadPhone').value.trim();
            const message = document.getElementById('leadMessage').value.trim();

            if (!name || !email || !phone || !message) {
                alert('⚠️ Por favor, rellena todos los campos.');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('⚠️ Email no válido.');
                return;
            }

            try {
                await db.collection('leads').add({
                    userId: currentUser ? currentUser.uid : null,
                    userName: name,
                    userEmail: email,
                    userPhone: phone,
                    message: message,
                    houseId: 'house_nordic',
                    houseTitle: 'Modelo Nordic Eco',
                    companyId: 'DEMO_COMPANY', // Replace with real company ID when dynamic
                    status: 'nuevo',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                alert('✅ ¡Solicitud enviada! La empresa se pondrá en contacto contigo pronto.');

                // Clear form
                document.getElementById('leadName').value = '';
                document.getElementById('leadEmail').value = '';
                document.getElementById('leadPhone').value = '';
                document.getElementById('leadMessage').value = '';

            } catch (error) {
                console.error('Error sending lead:', error);
                alert('❌ Error al enviar la solicitud. Inténtalo de nuevo.');
            }
        }

        // Track page view for analytics
        async function trackView() {
            try {
                await db.collection('views').add({
                    houseId: 'house_nordic',
                    houseTitle: 'Modelo Nordic Eco',
                    companyId: 'DEMO_COMPANY',
                    userId: currentUser ? currentUser.uid : null,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    userAgent: navigator.userAgent,
                    referrer: document.referrer || 'direct'
                });
            } catch (error) {
                console.error('Error tracking view:', error);
            }
        }

        // Track view on page load
        trackView();
    </script>

</body>

</html>